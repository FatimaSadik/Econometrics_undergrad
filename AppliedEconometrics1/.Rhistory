#Lab 1
#Note: Update the R
#In this course we will use the companion package for Wooldridge's textbook
#Install Packages and loading them in R
install.packages("wooldridge")
library(wooldridge)
#load dataframe from the package. Note, the command will not work if the package wooldridge is not installed and unpacked properly
data("Fertility")
#To see the summary statistics for all columns
summary(Fertility)
#load dataframe from the package. Note, the command will not work if the package wooldridge is not installed and unpacked properly
data("Fertility")
#load dataframe from the package. Note, the command will not work if the package wooldridge is not installed and unpacked properly
data("Fertility")
#load dataframe from the package. Note, the command will not work if the package wooldridge is not installed and unpacked properly
data("fertil1")
force(fertil1)
#To see the summary statistics for all columns
summary(fertil1)
# Lab 1
# Note: Update R if needed
# Install and load Wooldridge package
install.packages("wooldridge")   # Run this only once
library(wooldridge)
# Load dataframe from the package
data("fertil1")
# View summary statistics for all columns
summary(fertil1)
# View summary statistics for one particular column
summary(fertil1$morekids)
# Create a new variable/column 'age2' in the fertil1 dataframe
fertil1$age2 <- fertil1$age^2
install.packages("wooldridge")
# View summary statistics for one particular column
summary(fertil1$morekids)
# 1. Install packages (Run only once)
install.packages("wooldridge")
install.packages("dplyr")
# 2. Load libraries
library(wooldridge)
library(dplyr)
# 3. Load dataframe from the wooldridge package
data("fertil1")
# 4. View summary statistics for all columns
summary(fertil1)
# 5. Create a new variable 'age2' (age squared)
fertil1$age2 <- fertil1$age^2
# 5. Create a new variable 'age2' (age squared)
fertil1$age2 <- fertil1$age^2
fertil1_1972 <- fertil1 %>%
filter(year == 1972)
# 8. Check the filtered data
summary(fertil1_1972)
head(fertil1_1972)
# 6. Filter data for year == 1972
fertil1_1972 <- fertil1 %>%
filter(year == 72)
# 8. Check the filtered data
summary(fertil1_1972)
head(fertil1_1972)
unique(fertil1_1972$year)
names(fertil1_1972)
install.packages("ggplot2")
library(ggplot2)
# Histogram of age
ggplot(fertil1_1972, aes(x = age)) +
geom_histogram(binwidth = 2, fill = "skyblue", color = "black") +
labs(title = "Distribution of Age (1972)", x = "Age", y = "Count")
# Boxplot of education years by morekids status
ggplot(fertil1_1972, aes(x = factor(morekids), y = educ, fill = factor(morekids))) +
geom_boxplot() +
labs(title = "Education Years by More Kids Status (1972)",
x = "More Kids (0 = No, 1 = Yes)", y = "Years of Education") +
scale_fill_manual(values = c("tomato", "lightgreen"))
# Boxplot of education years by race
ggplot(fertil1_1972, aes(x = factor(black), y = educ, fill = factor(morekids))) +
geom_boxplot() +
labs(title = "Education Years by More Kids Status (1972)",
x = "More Kids (0 = No, 1 = Yes)", y = "Years of Education") +
scale_fill_manual(values = c("tomato", "lightgreen"))
# Boxplot of education years by race
ggplot(fertil1_1972, aes(x = factor(black), y = educ, fill = factor(black))) +
geom_boxplot() +
labs(title = "Education Years by More Kids Status (1972)",
x = "Black (0 = White, 1 = Black)", y = "Years of Education") +
scale_fill_manual(values = c("tomato", "lightgreen"))
# Boxplot of education years by race
ggplot(fertil1_1972, aes(x = factor(town), y = educ, fill = factor(town))) +
geom_boxplot() +
labs(title = "Education Years by Town (1972)",
x = "Town", y = "Years of Education") +
scale_fill_manual(values = c("tomato", "lightgreen"))
scale_fill_manual(values = c("tomato", "lightgreen"))
ggplot(fertil1_1972, aes(x = factor(town), y = educ)) +
geom_boxplot(fill = "blue") +
labs(
title = "Education Years by Town (1972)",
x = "Town",
y = "Years of Education"
)
ggplot(fertil1_1972, aes(y = educ)) +
geom_boxplot(fill = "skyblue", color = "black") +
labs(
title = "Boxplot of Education Years (1972)",
y = "Years of Education"
)
# 2. Load libraries
library(wooldridge)
library(dplyr)
library(ggplot2)
# 3. Load dataframe from the wooldridge package
data("fertil1")
force(fertil1)
View(fertil1)
View(fertil1)
# 4. View summary statistics for all columns
summary(fertil1)
summary(fertil1$age)
fertil1_1972 <- fertil1 %>%
filter(year == 72)
View(fertil1_1972)
summary(fertil1_1972)
head(fertil1_1972)
unique(fertil1_1972$year)
names(fertil1_1972
names(fertil1_1972)
names(fertil1_1972)
ggplot(fertil1_1972, aes(x = age)) +
geom_histogram(binwidth = 2, fill = "skyblue", color = "black") +
labs(title = "Distribution of Age (1972)", x = "Age", y = "Count")
ggplot(fertil1_1972, aes(y = educ)) +
geom_boxplot(fill = "skyblue", color = "black") +
labs(
title = "Boxplot of Education Years (1972)",
y = "Years of Education"
)
library(wooldridge)
library(dplyr)
# Load dataset
data("wage1")
force(wage1)
# Simple regression: wage on education
ols_model <- lm(wage ~ educ, data = wage1)
summary(ols_model)
View(ols_model)
View(ols_model)
y <- wage1$wage
x <- wage1$educ
y_hat <- fitted(ols_model)
u_hat <- residuals(ols_model)
sum(u_hat)
cov(x, u_hat)
mean_y <- mean(y)
mean_x <- mean(x)
beta0 <- coef(ols_model)[1]
beta1 <- coef(ols_model)[2]
y_at_meanx <- beta0 + beta1 * mean_x
c(mean_y = mean_y, fitted_at_meanx = y_at_meanx)
cov(y_hat, u_hat)
plot(x, y, pch = 16, col = "steelblue",
xlab = "Education (years)", ylab = "Wage",
main = "Wage vs Education with OLS Fit")
abline(ols_model, col = "red", lwd = 2)
points(mean_x, mean_y, col = "darkgreen", pch = 19, cex = 1.5)
text(mean_x, mean_y, labels = "(mean x, mean y)", pos = 4)
#C2
#faminc    cigtax    cigprice  bwght     fatheduc  motheduc  parity    male
#white     cigs      lbwght    bwghtlbs  packs     lfaminc
#Obs:  1388
#1. faminc                   1988 family income, $1000s
#2. cigtax                   cig. tax in home state, 1988
#3. cigprice                 cig. price in home state, 1988
#4. bwght                    birth weight, ounces
#5. fatheduc                 father's yrs of educ
#6. motheduc                 mother's yrs of educ
#7. parity                   birth order of child
#8. male                     =1 if male child
#9. white                    =1 if white
#10. cigs                     cigs smked per day while preg
#11. lbwght                   log of bwght
#12. bwghtlbs                 birth weight, pounds
#13. packs                    packs smked per day while preg
#14. lfaminc                  log(faminc)
library(wooldridge)
data("bwght")
n_women <- nrow(bwght)                   # total sample size
n_smokers <- sum(bwght$cigs > 0, na.rm = TRUE)  # women who smoked (cigs > 0)
c(total_women = n_women, smokers = n_smokers)
print(list(total_women = n_women, smokers = n_smokers))
avg_cigs <- mean(bwght$cigs, na.rm = TRUE)
median_cigs <- median(bwght$cigs, na.rm = TRUE)
c(mean = avg_cigs, median = median_cigs)
avg_cigs_smokers <- mean(bwght$cigs[bwght$cigs > 0], na.rm = TRUE)
avg_cigs_smokers
avg_fatheduc <- mean(bwght$fatheduc, na.rm = TRUE)
n_fatheduc <- sum(!is.na(bwght$fatheduc))
c(mean_fatheduc = avg_fatheduc, n_used = n_fatheduc)
avg_faminc <- mean(bwght$faminc, na.rm = TRUE)
sd_faminc  <- sd(bwght$faminc, na.rm = TRUE)
c(mean_income = avg_faminc, sd_income = sd_faminc)
ols<-lm(bwght~cigs,data=bwght)
View(ols)
summary(ols)
c(total_women = n_women, smokers = n_smokers)
ols<-lm(bwght~cigs,data=bwght)
summary(ols)
